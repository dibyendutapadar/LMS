{% extends 'base.html' %}
<!-- Add CSS styles here -->
{% block stylesheets %}
<style>
    body,
    h1,
    h2,
    h3,
    p {
        margin: 0;
        padding: 0;
    }

    body {
        font-family: 'Arial', sans-serif;
    }

    /* Style for the KPI container */
    .kpi-container {
        display: flex;
        justify-content: space-around;
        margin: 20px 0;
    }

    /* Style for individual KPI */
    .kpi {
        background-color: #f8f9fa;
        border-radius: 8px;
        padding: 20px;
        text-align: center;
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        transition: 0.3s;
        width: 30%;
        /* Adjust the width as needed */
    }

    .kpi:hover {
        box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
    }

    /* Style for the KPI title */
    .kpi-title {
        color: #6c757d;
        font-size: 16px;
        margin-bottom: 5px;
    }

    /* Style for the KPI number */
    .kpi-number {
        color: #333;
        font-size: 36px;
        font-weight: bold;
        margin-bottom: 5px;
    }

    /* Style for the KPI percentage change */
    .kpi-change {
        color: #28a745;
        /* Green color for positive change */
        font-size: 16px;
        font-weight: bold;
    }

    .kpi-change.negative {
        color: #dc3545;
        /* Red color for negative change */
    }

  .charts-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .chart {
    width: 33%;
    height: 400px;
    display: inline-block;
    text-align: center; /* Center the image horizontally */
  }

  .chart img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain; /* This will ensure the image is scaled to be as large as possible but still be fully visible within the chart's div */
    height: auto; /* Maintain the aspect ratio of the image */
  }

</style>
{% endblock %}

{% block content %}
<!-- Add a form for the date and courseId filters -->
<form method="POST">
    <label for="from_date">From Date:</label>
    <input type="date" id="from_date" name="from_date" value="{{ formatted_from_date }}">
    <label for="to_date">To Date:</label>
    <input type="date" id="to_date" name="to_date" value="{{ formatted_to_date }}">
    <button type="submit">Filter</button>
</form>


<div class="kpi-container">
    <div class="kpi">
        <div class="kpi-title">Total Registered Learners</div>
        <div class="kpi-number">{{ total_learners }}</div>
    </div>
    <div class="kpi">
        <div class="kpi-title">Active Learners This Week</div>
        <div class="kpi-number">{{ active_learners_this_week }}</div>
        <div class="kpi-change{{ ' negative' if percent_increase_learners < 0 else '' }}">
            {{ '%+.2f' % percent_increase_learners }}% 7d
        </div>
    </div>
    <div class="kpi">
        <div class="kpi-title">Total Learning Hours This Week</div>
        <div class="kpi-number">{{ total_learning_hours_this_week|round(2) }}</div>
        <div class="kpi-change{{ ' negative' if percent_increase_hours < 0 else '' }}">
            {{ '%+.2f' % percent_increase_hours }}% 7d
        </div>
    </div>
</div>


<!-- Chart container -->
<div class="charts-container">
    <div class="chart" id="courseTimeChart">
        <img src="{{ url_for('course_time_chart') }}" alt="Course Time Chart">
    </div>
    <div class="chart" id="courseLearnerCountChart">
        <img src="{{ url_for('course_learner_count_chart') }}" alt="Course Learner Count Chart">
    </div>
    <div class="chart" id="learnerTimeChart">
        <img src="{{ url_for('learner_time_chart') }}" alt="Learner Time Chart">
    </div>
</div>

{% endblock %}
{% block script %}
</script>



{% endblock %}